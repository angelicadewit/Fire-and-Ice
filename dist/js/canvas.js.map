{"version":3,"sources":["canvas.js"],"names":["app","PIXI","Application","view","document","getElementById","width","height","transparent","manifest","loadAssets","loader","add","load","onAssetsLoaded","resources","setupWave","console","log","ticker","e","update","resize","canvasAspect","screen","screenAspect","window","innerWidth","innerHeight","scale","style","transform","bg","Sprite","texture","displacement3","baseTexture","wrapMode","WRAP_MODES","REPEAT","mask","stage","addChild","displace","filter","filters","DisplacementFilter","TweenMax","fromTo","x","y","repeat","ease","Linear","easeNone","onload","addEventListener"],"mappings":"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","file":"canvas.js","sourcesContent":["const app = new PIXI.Application({\n    view: document.getElementById(\"pixiCanvas\"),\n    width: 800,\n    height: 400,\n    transparent: true\n});\n\nlet manifest = [\n    {\n        \"key\": \"bg\",\n        \"url\": \"dist/img/fire-and-ice-canvas.png\"\n    },\n    {\n        \"key\": \"mask\",\n        \"url\": \"dist/img/fire-and-ice-mask.jpg\"\n    },\n    {\n        \"key\": \"displacement3\",\n        \"url\": \"dist/img/displacement3.png\"\n    },\n]\n\n\nfunction loadAssets(){\n    app.loader.add(manifest)\n    app.loader.load(onAssetsLoaded)\n}\n\nfunction onAssetsLoaded(loader, resources){\n\n    // basicMask()\n    setupWave()\n    console.log(resources)\n\n    app.ticker.add((e) => update(e))\n}\n\nfunction update(e){\n\n}\n\n\nfunction resize(e){\n    let canvasAspect = app.screen.width / app.screen.height\n    let screenAspect = window.innerWidth / window.innerHeight\n    let scale = 1\n\n    if (screenAspect > canvasAspect) {\n        scale = window.innerWidth / app.screen.width\n    } else {\n        scale = window.innerHeight / app.screen.height\n    }\n\n    app.view.style.transform = \"scale(\" + scale + \")\"\n}\n\n\n// function basicMask(){\n\n//     let bg = new PIXI.Sprite(app.loader.resources.bg.texture)\n//     app.stage.addChild(bg)\n//     let mask = new PIXI.Sprite(app.loader.resources.mask.texture)\n//     app.stage.addChild(mask)\n\n//     console.log(mask)\n// }\n\nfunction setupWave(){\n    let bg = new PIXI.Sprite(app.loader.resources.bg.texture)\n\n    app.loader.resources.displacement3.texture.baseTexture.wrapMode = PIXI.WRAP_MODES.REPEAT\n    let mask = new PIXI.Sprite(app.loader.resources.mask.texture)\n    app.stage.addChild(mask)\n    \n    let displace = new PIXI.Sprite(app.loader.resources.displacement3.texture, 2048, 2560) \n    app.stage.addChild(displace)\n    let filter = new PIXI.filters.DisplacementFilter(displace)\n\n    bg.filters = [filter]\n    \n    TweenMax.fromTo(filter.scale, 5, \n        {\n            x: 0,\n            y: 0\n        },\n        {\n            x: 30,\n            y: 30,\n        })\n\n    TweenMax.fromTo(displace, 10,\n        {\n            x: 0,\n            y: 0\n        },\n        {\n            x: -1024,\n            y: -1280,\n            repeat: -1,\n            ease: Linear.easeNone\n        })\n\n    app.stage.addChild(bg)\n}\n\n\nwindow.onload = function(){\n    window.addEventListener(\"resize\", resize)\n    resize()\n    loadAssets()\n}"]}